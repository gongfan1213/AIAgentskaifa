### 第5章 生成式代理——以斯坦福AI小镇为例
Agent可以将大语言模型的核心能力应用于实际场景，Multi - Agent通过Agent之间的相互协作来共同解决复杂的问题或完成复杂的任务，具有强大的问题解决能力。而Multi - Agent的Agent之间的交互能力对Agent应用普及和应用场景的多样化具有至关重要的作用。开发智能应用，通过让Agent模拟可信的人类行为，可以提升从虚拟现实环境、人际交流训练到原型工具等各种互动应用的体验。这催生了生成式代理（Generative Agents）的出现，其将大语言模型与计算交互代理相结合，实现了人类行为的可信模拟和复杂交互模式的架构。

本章以“斯坦福AI小镇”为例介绍生成式代理，对其架构和关键组件进行讲解和分析，并从生成式代理架构的设计思想、模拟人类行为为框架、沙盒环境等方面进行详细阐述，帮助读者深入了解其内部机制和工作原理。同时评估生成式代理的能力和局限性。

#### 5.1 生成式代理简介
生成式代理是一种先进的AI模型，它通过深度学习技术，捕捉和学习大量数据中的复杂模式和结构，理解数据中的现有信息，并创造性地生成在统计特性上与原始数据集相似的新数据实例。例如，在文本生成领域中，生成式代理能够根据给定的上下文或提示，创造出连贯、有意义的句子或段落，这些文本在语义上与人类的写作相似；在图像处理领域中，生成式代理能够生成逼真的图像，甚至能够根据用户的描述创造出特定的场景或对象。生成式代理的核心优势在于创造性和灵活性，其能够为艺术创作、内容生产、数据增强等提供强大的支持，推动AI技术在各个领域中的进一步发展。可以说，生成式代理代表了目前AI领域的一个新前沿，其能够创建出交互式、动态的虚拟环境，在仿真和模拟方面具有广泛的应用潜力，如数据增强、虚拟环境创建、游戏开发、艺术创作、语言模型、经济模型、社交机器人、生物医学模拟、军事模拟等方面。

**1. 由来及功能**

生成式代理的概念最早由斯坦福大学和谷歌公司的联合研究团队提出，他们将其定义为一类特殊的计算软件代理，用来模拟可信的人类行为。在斯坦福AI小镇这个示例项目中，这些代理能够模拟人类日常活动（如起床、做早餐、上班），以及艺术家绘画、作家写作等创造性活动；能够形成观点、注意其他代理并与之对话，还可以记忆、反思过去的经历和计划未来的活动。



**2. 关键组件**

![image](https://github.com/user-attachments/assets/f9267e29-6714-46ad-9b90-a257e4319e86)


生成式代理体系架构包含几个关键组件：

- **感知（Perceive）**：生成式代理首先感知其所处的环境和发生在周围的事件。
- **记忆流（Memory Stream）**：生成式代理的所有感知和经历都被记录在记忆流中，这是一个长期记忆模块，以自然语言的形式记录生成式代理的所有感知和经历。记忆流使得生成式代理能够回顾过去，提取相关经验，并将其应用于当前和未来的决策中。 
- **检索（Retrieve）**：基于当前的感知和需要，生成式代理从记忆流中检索相关信息。
- **检索到的记忆（Retrieved Memories）**：这些是从记忆流中检索出来的具体记忆，生成式代理将利用它们来形成决策。 
- **反思（Reflect）**：生成式代理不仅拥有记忆，还能够对这些记忆进行高层次的反思，形成关于自身和其他人的更深入的推断。这些反思帮助生成式代理从经验中学习，并指导其行为。 
- **计划（Plan）**：生成式代理能够根据其记忆和反思制订行动计划。生成式代理以这些计划指导日常行动，生成式并会根据环境变化和新接收的信息来动态调整行动。 
- **行动（Act）**：生成式代理根据计划采取行动，并根据行动结果更新其记忆流，从而为下一步的感知和决策提供依据。 

#### 5.2 斯坦福AI小镇项目简介
斯坦福大学和谷歌公司的研究团队合作发表了一篇名为《Generative Agents: Interactive Simulacra of Human Behavior》的文章，文章中介绍了一种新型的AI技术——生成式代理，这项技术能够创建模拟人类的交互式行为，使计算代理在虚拟环境中展现出类似人类的行为和社会交往能力。

**5.2.1 斯坦福AI小镇项目背景**
斯坦福AI小镇作为生成式代理的交互式沙盒环境，用于展示生成式代理如何在一个模拟的社会环境中与用户及其他生成式代理互动，也是一个用于展示和测试生成式代理技术的平台。在该交互式沙盒环境中，扩展了大语言模型，使用自然语言存储生成式代理经历的完整记录，随时间推移将记忆合成更高级别的反思，并通过动态检索记忆和反思来计划行动。斯坦福AI小镇的环境和《模拟人生》（The Sims）游戏的环境类似：代理们进行日常活动，形成社交关系、协调群体活动等。例如，一个代理想要举办情人节派对，在接下来的两周时间里代理自主地传播派对邀请信息，结识新朋友，并协调其他代理在正确的时间一起出现在派对上。因为这个虚拟小镇是由斯坦福大学和谷歌公司的研究团队创建的，因此其有时被称为“斯坦福AI小镇”。从早期的《模拟人生》游戏到现代的认知模型和虚拟环境，研究人员一直在探索如何创造能够以逼真方式模拟人类行为的计算代理，斯坦福AI小镇正是这一探索的前沿成果，它通过生成式代理技术，为AI与人类互动提供了一个全新的平台，这不仅是一个技术奇迹，更是研究人员对AI如何模拟人类行为的深刻探索。

**5.2.2 斯坦福AI小镇设计原理**
斯坦福AI小镇定义了一个虚拟社区，由25个生成式代理组成。在小镇中，代理们进行各种日常活动，形成社交关系，并协调群体活动。示例如下：
- **日常生活模拟**：代理们能够模拟起床、做早餐、上班等日常活动，以及艺术家绘画、作家写作等创造性活动。
- **社交互动**：代理们能够形成观点，注意彼此，并开始对话。它们能够记住过去的互动，并基于这些记忆来计划未来的社交活动。 
- **群体协调**：代理们能够协调群体活动，如组织派对或社区活动。它们能够传播信息，邀请其他代理参加活动，并在活动中进行互动。 
- **用户交互**：用户可以通过自然语言与代理进行交互，观察代理的行为，甚至干预其决策过程。 

斯坦福AI小镇的设计基于以下几个核心原理：
- **记忆流**：每个代理都拥有自己的记忆流，这是一种长期记忆模块，用自然语言记录了代理的所有经历。 
- **反思**：代理能够将记忆中的事件综合成更高层次的反思，帮助其做出更好的行为决策。 
- **计划**：代理能够根据反思和当前环境制订行动计划，并在必要时进行调整。 
- **交互式沙盒环境**：斯坦福AI小镇提供了一个类似《模拟人生》游戏场景的交互式环境，用户可以观察和干预代理的行为。 
- **自然语言处理**：代理与用户和其他代理的交流都是通过自然语言进行的，这使得交互更加自然和直观。 

**5.2.3 斯坦福AI小镇典型情景**
在斯坦福AI小镇中，25个个性化的生成式代理扮演着不同的角色，进行着各种日常活动，典型情景如下：
- **家庭生活**：代理们在自己的家中醒来，整理个人卫生，准备早餐，并与家人交流。
- **工作场景**：代理们前往工作地点，执行它们的任务，如艺术家绘画、作家写作。
- **社交活动**：代理们在斯坦福AI小镇的公共场所（如咖啡馆、公园）进行社交，形成新的社交关系，甚至组织和参加派对。 
- **信息传播**：重要信息（如选举和节日活动）在代理间传播，其展示了信息是如何在社区内扩散的。 
- **紧急情况处理**：当出现紧急情况（如火灾或家中设施损坏）时，代理们能够做出合理的反应。 

**5.2.4 交互体验**
- **交互体验的维度**
    - **自我介绍与角色扮演**：当用户首次进入斯坦福AI小镇时，他们有机会通过自然语言对生成式代理进行自我介绍。用户可以选择一个角色，或者创造一个全新的身份。生成式代理会根据用户所选的角色来调整它的反应和互动方式，从而提供一种身临其境的体验。 
    - **日常对话与信息交换**：用户可以与生成式代理进行日常对话，询问它的生活、工作、兴趣等。生成式代理能够根据它的记忆流中的信息，给出详细的回答，使对话显得自然而富有深度。此外，用户也可以分享信息，如新闻、事件或个人见解，生成式代理会将这些信息整合到它的知识库中，并可能在与其他代理的交流中传播这些信息。 
    - **情感交流与支持**：斯坦福AI小镇的生成式代理被设计成能够识别和表达情感。用户可以与生成式代理分享自己的感受，它会给予用户情感上的支持和安慰。这种情感层面的交互不仅增强了用户的沉浸感，也使得生成式代理能够更好地理解和响应用户的需求。 
    - **社交活动与事件策划**：用户可以参与到生成式代理的社交活动中，如派对或节日庆典，还可以与生成式代理一起策划这些活动，从选择地点到安排活动流程。通过这样的合作，用户能够更深入地了解生成式代理的个性和社交网络。 
    - **决策参与与影响**：在斯坦福AI小镇中，用户的决策可以对生成式代理的行为产生实质性的影响。例如，用户可以建议生成式代理参加某个活动或改变它的日常生活习惯。生成式代理会考虑用户的建议，并将其纳入它的长期计划中。 
- **交互体验的深度**
    - **记忆与学习**：生成式代理的记忆流不仅记录了它的经历，还包含了与用户的互动。这些记忆使得生成式代理能够从过去的经验中学习，并在未来的交互中展现出更深层次的理解。 
    - **个性化反应**：每个生成式代理都被赋予了独特的个性和行为模式。在与用户的交互中，生成式代理能够根据用户的特点和偏好做出个性化的反应，使得每一次的交流都独一无二。 
    - **社会动态的模拟**：斯坦福AI小镇中的生成式代理形成了一个复杂的社会网络，用户可以通过观察和参与生成式代理之间的互动来了解社会动态是如何在生成式代理之间形成和演变的。 
- **交互体验的广度**
    - **多角色互动**：用户可以同时与多个生成式代理进行互动，体验不同的社交场景和角色关系。这种多角色互动不仅丰富了用户的体验，也展示了生成式代理在处理复杂的社会关系方面的能力。 
    - **环境互动**：斯坦福AI小镇提供了一个互动的环境，用户可以改变生成式代理所处的环境，如调整家中的布局或改变公共场所的装饰。这些环境变化能够提高和激发生成式代理的适应性和创造力。 
    - **长期交互的潜力**：随着时间的推移，用户与生成式代理之间的关系可以逐渐发展和深化。长期交互使得生成式代理能够展现出更加复杂和细腻的行为，同时让用户感受到更深层次的参与感。 

**5.2.5 技术实现**
斯坦福AI小镇的技术实现是一个复杂而精细的有机体，它涉及多个层面的集成，包括自然语言处理、机器学习、认知建模及计算机图形学等，以下是对这一实现的详细描述。
- **架构概述**：斯坦福AI小镇的架构建立在一个先进的计算模型上，该模型融合了大语言模型（如ChatGPT）和一系列定制的软件组件。这些组件协同工作，使得每个生成式代理都能够感知环境、存储记忆、进行反思、计划行动，并与用户及其他代理进行交互。 
- **记忆流**：每个生成式代理的核心是其记忆流，这是一个动态更新的数据库，记录了生成式代理的所有经历和感知。记忆流不仅包括生成式代理的个人经历，还可能包括与环境和其他代理的互动。这些记忆以自然语言的形式存储，使得生成式代理能够利用大语言模型来检索和分析这些信息。 
- **记忆检索与合成**：生成式代理的行为和决策过程依赖于对记忆流中信息的有效检索。通过一个复杂的检索系统，生成式代理可以根据当前的情境和需求，从记忆流中提取相关信息。检索系统考虑了记忆的相关性、时效性和重要性，以确保生成式代理能够做出最合适的反应。 
- **反思与决策制定**：反思是生成式代理行为的一个关键组成部分，它允许生成式代理从过去的经验中学习，并据此调整其行为。通过一个高级的反思机制，生成式代理能够将记忆合成为更高层次的推断和决策，这些决策不仅基于当前的情况，也考虑了长期的目标和计划。 
- **计划与行动**：在确定了行动方针后，生成式代理将制订详细的行动计划。这些计划包括了一系列的步骤和目标，生成式代理将按照这些计划来执行具体的行为。计划系统能够处理长期和短期的计划，以确保生成式代理的行为在时间上具有连贯性。 
- **交互式沙盒环境**：斯坦福AI小镇的环境是一个交互式沙盒，它提供了一个模拟的社会空间，生成式代理可以在其中自由行动和互动。交互式沙盒环境的设计允许用户以自然语言的形式介入和操纵，从而观察和影响生成式代理的行为。 
- **用户交互与生成式代理反应**：用户可以通过自然语言与生成式代理进行交流，生成式代理将根据用户的输入来调整其行为和计划。这种交互方式不仅包括简单的问答，还可能涉及复杂的情感交流和社会互动。 
- **社会动态与群体行为**：斯坦福AI小镇的生成式代理能够通过信息传播、关系形成和群体协调等自发的群体行为来表达复杂的社会动态，这些群体行为是由生成式代理之间的互动自然产生的，而不是预先编程好的。 
- **技术挑战与优化**：实现斯坦福AI小镇的技术架构面临着多种挑战，包括如何处理和存储大量的记忆数据、如何提高检索和反思的效率，以及如何确保生成式代理行为的可信度和连贯性。研究人员需要不断地优化算法，改进模型，以应对这些挑战。 
- **未来展望**：随着技术的进步，斯坦福AI小镇的架构有望变得更加精细和高效。未来的工作可能会集中在提高生成式代理的自主性、增强交互体验的真实性，以及探索生成式代理在更广泛领域中的应用。 

**5.2.6 社会影响**
斯坦福AI小镇的生成式代理对社会产生了广泛而深远的影响。其不仅改变了研究团队与技术的互动方式，还引发了关于心理、社会、伦理和法律等多个层面的重要讨论。随着AI技术的不断发展，研究团队需要持续关注这些社会影响，并积极寻求解决方案，以确保AI技术能够在促进社会进步的同时，符合人类的长远利益。
- **心理层面的影响**：生成式代理在斯坦福AI小镇中的行为和交互，对用户的心理体验有着直接的影响。生成式代理通过模仿人类的社交行为，能够提供陪伴和情感支持，这对于缓解孤独感、提升情绪状态具有积极作用。同时，这种交互能够作为心理治疗的辅助工具，帮助人们在安全的环境中探索和解决个人情感问题。 
- **社会互动的变革**：斯坦福AI小镇提供了一个平台，让用户以新的方式与生成式代理进行社会互动。在这个平台中，生成式代理能够模拟真实的社交场景，提供一种超越现实社交限制的体验。这种新型的社交模式可能会改变人们对社会互动的认知和期待，促进社会包容性和多样性的发展。 
- **教育与职业培训的应用**：生成式代理在教育与职业培训领域中具有巨大的潜力。在斯坦福AI小镇中，生成式代理可以模拟各种职业角色，提供实践操作的机会，帮助学习者在模拟环境中掌握必要的技能。此外，生成式代理还能够根据学习者的学习进度和表现，提供个性化的指导和反馈。 
- **伦理和道德的考量**：随着生成式代理在社会中的作用日益增强，伦理和道德问题也日益凸显。例如，生成式代理是否应该拥有某种形式的权利？其行为是否应该受到道德规范的约束？斯坦福AI小镇提供了一个实验场，让研究团队能够在实际应用之前，对这些问题进行深入的探讨和反思。 
- **法律和政策的挑战**：生成式代理的广泛应用对现有的法律体系和政策提出了挑战。例如，当生成式代理参与决策或提供服务时，如何界定责任归属？如何确保生成式代理的行为不会侵犯个人隐私或造成不公平的歧视？这些问题需要政策制定者、技术开发者及社会各界共同思考和解决。 
- **社会结构的模拟与分析**：斯坦福AI小镇作为一个微观社会模型，可以用来模拟和分析更广泛的社会结构和动态。通过观察生成式代理之间的交互过程和群体行为，可以帮助研究人员更好地理解社会网络、信息传播、群体决策等复杂行为。 
- **文化多样性的体现**：生成式代理在斯坦福AI小镇中可以生成不同的文化背景和社会身份，这为研究文化多样性提供了一个独特的视角。通过模拟不同文化背景下的行为和交流模式，可以增进研究团队对不同文化价值观和生活方式的理解，促进跨文化的交流和融合。 
- **人类行为的镜像**：斯坦福AI小镇中的生成式代理，可以作为人类行为的一个镜像，反映出研究团队的社会属性和心理特征。通过观察和分析代理的行为，研究团队可以更深入地了解自己的行为模式、决策过程及情感反应。 

#### 5.3 斯坦福AI小镇体验
**5.3.1 资源准备**
要运行斯坦福AI小镇，需要提前准备好开发环境和源代码等。开源项目文件generative_agents代码从GitHub官方网站下载，开发环境使用Visual Studio Code（VSCode），包管理和环境管理使用Anaconda，开发语言使用JavaScript和Python，源代码使用开发框架Bootstrap/Django和开发包OpenAI。

![image](https://github.com/user-attachments/assets/3875a0b1-3ad0-4b74-9f90-1548a99dc245)

![image](https://github.com/user-attachments/assets/0bc45df8-9167-4e71-aa60-bb631a508144)

![image](https://github.com/user-attachments/assets/29fdc6fa-8725-4ac2-807a-8d6bf4156634)

![image](https://github.com/user-attachments/assets/9df16445-b743-46a7-9b72-897a86876f86)


![image](https://github.com/user-attachments/assets/08eb3714-e1b3-4771-81a5-06217aeaf617)



### 5.3 斯坦福AI小镇体验
#### 5.3.1 资源准备
要运行斯坦福AI小镇，需要提前准备好开发环境和源代码等。开源项目文件generative_agents代码从GitHub官方网站下载，开发环境使用Visual Studio Code（VSCode），包管理和环境管理使用Anaconda，开发语言使用JavaScript和Python，源代码使用开发框架Bootstrap/Django和开发包OpenAI。

#### 5.3.2 部署运行
**1. 环境设置**

步骤1：下载generative_agents开源项目文件代码。

打开VSCode，在“启动”菜单中选择“克隆Git仓库”命令。在弹出的窗口中首先单击“从github克隆”按钮，输入：git@github.com:joonspk - research/generative_agents.git。然后选择显示的项目，并选择对应的本地目录进行存储。克隆需要一段时间，请耐心等待。克隆完成后，打开generative_agents项目中的“powershell”界面，在命令行中输入：conda create -n genAgent2 python==3.9.12 。创建项目运行专用环境genAgent2，提示用户是否选择安装下列安装包，输入“y”，继续进行相关安装。

![image](https://github.com/user-attachments/assets/f32689ce-231c-4765-b1a3-d938698e4560)

![image](https://github.com/user-attachments/assets/06f6d8ce-0a24-4132-9236-4cd480562cee)



环境创建完成后，在命令行中输入：conda activate genAgent2 ，激活并切换到专用环境genAgent2中。

步骤2：安装requirements.txt文件中包含的安装包。

![image](https://github.com/user-attachments/assets/0b19a2cb-bbe4-4723-8db4-50be6dabdce3)


![image](https://github.com/user-attachments/assets/8930eea5-98b8-4043-ac27-1a0035240cbf)


在“powershell”界面中输入“pip install -r requirements.txt”命令，安装依赖环境所需的安装包。

步骤3：生成utils.py文件。

![image](https://github.com/user-attachments/assets/3a03f779-cf5f-4cc7-9a27-c01ee98c6739)


在文件夹reverie/backend_server中，创建一个名为“utils”的新文件，将以下内容复制并粘贴到该文件中：
```python
# Copy and paste your OpenAI API Key
openai_api_key = "<Your OpenAI API>"
# Put your name
key_owner = "<Name>"
maze_assets_loc = "../../environment/frontend_server/static_dirs/assets"
env_matrix = f"{maze_assets_loc}/the_ville/matrix"
env_visuals = f"{maze_assets_loc}/the_ville/visuals"
fs_storage = "../../environment/frontend_server/storage"
fs_temp_storage = "../../environment/frontend_server/temp_storage"
collision_block_id = "32125"
# Verbose
debug = True
```
将其中openai_api_key的值修改为自己的OpenAI API Key，key_owner根据自己的喜好起一个名字即可。


**2. 运行模拟**

要运行一个新的模拟示例，需要同时启动两台服务器：环境服务器和模拟服务器。

![image](https://github.com/user-attachments/assets/701bd482-13b6-4433-8c05-c3921eb1a14d)


步骤1：启动环境服务器。

环境是基于Django项目实现的，因此需要启动Django服务器。在“powershell”界面中转至environment/frontend_server路径下运行如下命令：python manage.py runserver 。通过浏览器访问http://localhost:8000/，如果看到一条消息“您的环境服务器已启动并正在运行”，则表明服务器运行正常。


步骤2：启动模拟服务器。

打开另一个“powershell”界面（在步骤1中使用的命令行应该仍在运行环境服务器，因此请保持原样），在该“powershell”界面中转至reverie/backend_server路径下运行如下命令：python reverie.py 。这将启动模拟服务器，并出现命令行提示“Input the Fork Simulation Name:”（输入分叉模拟的名称：）。例如，要模拟Isabella Rodriguez、Maria Lopez和Klaus Mueller这3个代理参与的群体行为，请输入：base the ville isabella maria klaus 。然后出现命令行提示“Input the New Simulation Name:”，可输入任何名称来表示当前的模拟，如“test - simulation” 。保持模拟服务器运行，此时会出现“Input the option:”的提示。

步骤3：运行并保存模拟。

通过浏览器访问http://localhost:8000/simulator_home，用户会看到小镇地图，以及地图上的生成式代理列表。可以使用键盘上的方向键在地图上移动。如果要运行模拟，则在模拟服务器中输入命令“run”以响应“Input the option:”的提示。

![image](https://github.com/user-attachments/assets/f1f4b762-bf90-4b49-ac50-5e21ec2f6bba)

![image](https://github.com/user-attachments/assets/b3db1076-f42e-4d0a-8b4c-ff55e13cc525)


单击任一生成式代理的信息项，会出现该代理（以Isabella为例）的详细信息图，包括姓名、年龄、当前时间等基本信息，视野半径、关注带宽、保持力等设置信息，性格、习得倾向、当前活动内容、睡眠习惯等习惯和活动信息，当前行动状态信息，记忆信息等。

![image](https://github.com/user-attachments/assets/65044c6c-8df6-45f7-8a9d-fb34490609d5)


### 5.4 生成式代理的行为和交互
#### 5.4.1 模拟个体和个体间的交流
斯坦福AI小镇里有25个个性化的生成式代理，每个生成式代理由一个模拟个体表示。研究团队为每个生成式代理编写了一段自然语言描述，以描绘它们的身份，包括它们的职业和与其他代理的关系，其被作为种子记忆。

**1. 生成式代理间的交流**

生成式代理通过行动与其他代理互动，它们之间通过自然语言相互交流。在沙盒引擎的每个时间步骤中，生成式代理会输出一个自然语言声明来描述它们当前的行动，例如，“Isabella Rodriguez正在写日记”“Isabella Rodriguez正在查看邮件”等。这个声明随后被翻译成影响沙盒世界的具体动作，系统使用大语言模型将行动翻译成一组表情符号，这些表情符号出现在每个头像的气泡中。用户可以通过单击代理的头像来查看该动作的完整自然语言描述。


生成式代理之间用自然语言相互交流，了解其所在地区的其他代理。例如Isabella Rodriguez和Tom Moreno之间关于即将到来的选举的对话：

Isabella：我还在权衡我的选择，但我一直在和Sam Moore讨论选举。你对它有什么看法？

Tom：老实说，我不喜欢Sam Moore。我认为它与社区脱节，并没有把研究团队的最佳利益放在心上。



**2. 用户控制**

用户通过指定生成式代理的人物角色来与它通过自然语言进行交流。例如，用户指定生成式代理John是“新闻记者”并问道，“谁将竞选公职”？生成式代理则会回答：我的朋友Yuriko、Tom和我一直在讨论即将到来的选举，并讨论候选人Sam。研究团队都同意投票给它，因为我们喜欢它的平台。



想要直接向其中一个生成式代理下达命令，用户需要作为生成式代理的“内心声音” ，这使得生成式代理更有可能将该陈述视为指令。例如，当用户以John的内心声音说“你将在即将到来的选举中与Sam竞选”时，John决定参加选举，并与它的妻子和儿子分享了它的候选身份。

#### 5.4.2 环境交互
斯坦福AI小镇具备小村庄常见的空间，包括咖啡馆、酒吧、公园、学校、宿舍、房屋和商店等。还定义了使这些空间功能化的子区域和对象，如房屋中的厨房和厨房中的炉子。所有生成式代理的主要生活区空间都设有床、书桌、衣柜、书架，还包括浴室和厨房。

![image](https://github.com/user-attachments/assets/572853b8-834e-4630-879c-50089c9c2d1c)


生成式代理像在简单的视频游戏中一样在斯坦福AI小镇中移动，进入和离开建筑物，导航地图，并接近其他代理。生成式代理的移动由生成式代理架构和沙盒引擎指导。当模型指示生成式代理移动到某个位置时，研究团队计算AI小镇环境中到目的地的步行路径，生成式代理开始移动。此外，用户也可以作为在AI小镇中操作的生成式代理进入沙盒世界。用户控制的生成式代理可以是已经存在于沙盒世界中的代理，如Isabella和John，也可以是没有任何AI小镇历史背景的外来访问者。AI小镇的居民对用户控制的生成式代理的待遇与对待彼此的方式没有区别，它们会识别生成式代理的存在，主动与它互动，并在形成对它的看法之前记住它的行为。

用户和生成式代理可以影响这个沙盒世界中物体的状态，就像在《模拟人生》等沙盒游戏中一样。例如，当代理睡觉时，床可以被占用，当代理做早餐用完材料时，冰箱可能是空的。用户还可以通过用自然语言重写代理周围物体的状态来重新塑造代理在AI小镇中的环境。例如，当Isabella早上在做早餐时，用户可以通过输入指令将厨房炉灶的状态从“打开”改为“着火”，指令如下：“<Isabella的公寓：厨房：炉灶>着火了。”Isabella会在下一刻注意到这一点，然后去关掉炉灶并重新做早餐。同样地，如果用户在Isabella进入浴室时将淋浴器的状态设置为“漏水”，则它会从客厅拿来工具并尝试修理漏水问题。

#### 5.4.3 示例“日常生活中的一天”
从单段描述开始，生成式代理开始计划它们的一天。随着沙盒世界中时间的流逝，这些生成式代理的行为随着它们彼此之间的互动和与世界的互动而演变，其建立记忆和关系，并协调联合活动。

以代理John Lin为例，在John的家里，John早上7:00第一个起床。它刷牙、洗澡、穿衣、吃早餐，并在客厅的餐桌上看新闻。早上7:30，Eddy紧随其后，匆匆起床为上课做准备，并在John正要出门时赶上了它。
John：早上好，Eddy。你睡得好吗？ 

![image](https://github.com/user-attachments/assets/62a2b994-15b0-4acd-82a6-336b518552b2)

